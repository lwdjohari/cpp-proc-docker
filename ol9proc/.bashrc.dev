# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

# User specific environment
if ! [[ "$PATH" =~ "$HOME/.local/bin:$HOME/bin:" ]]
then
    PATH="$HOME/.local/bin:$HOME/bin:$PATH"
fi
export PATH

# Uncomment the following line if you don't like systemctl's auto-paging feature:
# export SYSTEMD_PAGER=

# User specific aliases and functions
if [ -d ~/.bashrc.d ]; then
        for rc in ~/.bashrc.d/*; do
                if [ -f "$rc" ]; then
                        . "$rc"
                fi
        done
fi

unset rc


#== PROC_DEV_RC ==

# Define some colors

# redefine once
RED=$'\033[0;31m'; GREEN=$'\033[0;32m'; YELLOW=$'\033[1;33m'
CYAN=$'\033[1;36m'; BOLD=$'\033[1m'; RESET=$'\033[0m'


# Colorful aliases
alias ls='ls --color=auto'
alias ll='ls -alF'
alias la='ls -A'
alias grep='grep --color=auto'
export LESS='-R'

# Simple git branch on prompt
_git_branch() {
  local b
  b="$(git rev-parse --abbrev-ref HEAD 2>/dev/null)" || return 0
  [ "$b" != "HEAD" ] && printf ' (%s)' "$b"
}

# Colorful prompt
PS1='\[\e[1;32m\]\u@\h\[\e[0m\]:\[\e[1;34m\]\w\[\e[0m\]$(_git_branch) \$ '

# Tool version helpers
_ver() {
  if command -v "$1" >/dev/null 2>&1; then
    printf "%-10s %s\n" "${YELLOW}$1:${RESET}" "$("$1" --version 2>/dev/null | head -n1)"
  else
    printf "%-10s %s\n" "${YELLOW}$1:${RESET}" "${RED}MISSING${RESET}"
  fi
}

_proc_ver() {
  if command -v proc >/dev/null 2>&1; then
    printf "%-12s %s\n" "${YELLOW}Pro*C/C++:${RESET}" \
      "$(proc 2>&1 | head -n3 | tail -n2 | paste -sd' | ' - | sed 's/^[[:space:]]*//')"
  else
    printf "%-12s %s\n" "${YELLOW}Pro*C/C++:${RESET}" "${RED}MISSING${RESET}"
  fi
}


_sqlplus_ver() {
  if command -v sqlplus >/dev/null 2>&1; then
    printf "%-12s %s\n" "${YELLOW}sqlplus:${RESET}" \
      "$(sqlplus -V 2>&1 | head -n3 | tail -n2 | paste -sd' | ' - | sed 's/^[[:space:]]*//')"
  else
	  printf "%-12s %s\n" "${YELLOW}sqlplus:${RESET}" "${RED}MISSING${RESET} (optional, ok if not installed)"
  fi
}

devinfo() {
  echo -e "${CYAN}${BOLD}------------------------"
  echo -e " ENV"
  echo -e "------------------------${RESET}"

  printf "${YELLOW}ORACLE_HOME:${RESET}%s\n" "${ORACLE_HOME:-}"
  printf "${YELLOW}LD_LIBRARY_PATH:${RESET}%s\n" "${LD_LIBRARY_PATH:-}"
  printf "${YELLOW}PATH:${RESET}%s\n" "${PATH:-}"

  echo -e "${CYAN}${BOLD}------------------------"
  echo -e " TOOLCHAIN"
  echo -e "------------------------${RESET}"

  _proc_ver
  _ver clang
  _ver clang++
  _ver gcc
  _ver g++
  _ver cmake
  _ver ninja
  _ver gdb
  _sqlplus_ver

  echo -e "${CYAN}${BOLD}------------------------"
  echo -e " PATHS"
  echo -e "------------------------${RESET}"

  if [ -d /workspace ]; then
    echo -e "${YELLOW}WORKSPACE:${RESET}${GREEN}/workspace${RESET}"
  else
    echo -e "${YELLOW}WORKSPACE:${RESET} ${RED}MISSING /workspace${RESET}"
  fi

  printf "${YELLOW}HOME:${RESET} %s\n" "${HOME}"
  echo ""
}

